<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Model Showcase - Advanced Viewer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.4.0/model-viewer.min.js"></script>
</head>

<body data-theme="light">
    <div class="app-container">
        <header class="header">
            <h1>3D Showcase</h1>
            <p>Explore high-fidelity 3D assets with advanced controls.</p>
        </header>

        <!-- Theme Toggle -->
        <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
            <span class="theme-icon">üåô</span>
        </button>

        <!-- Performance Dashboard (Bottom Left) -->
        <aside class="stats-panel">
            <h3>Performance Analysis</h3>

            <div class="performance-score">
                <div class="score-display">
                    <span class="score-value" id="score">-</span>
                    <span class="score-status" id="status">-</span>
                </div>
            </div>

            <div class="metrics-grid">
                <div class="metric-item">
                    <span class="metric-label">File Size</span>
                    <span class="metric-value" id="filesize">-</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Texture Memory</span>
                    <span class="metric-value" id="texture-memory">-</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Triangles</span>
                    <span class="metric-value" id="triangles">-</span>
                </div>
            </div>

            <div class="optimization-tips" id="optimization-tips">
                <h4>üí° Tips</h4>
                <ul id="tips-list">
                    <li>Load a model to see tips</li>
                </ul>
            </div>
        </aside>

        <!-- Main Viewer -->
        <main class="viewer-wrapper">
            <model-viewer id="model-viewer" src="./3D_Models/high_poly_plague_knight.glb" alt="A 3D model" auto-rotate
                camera-controls shadow-intensity="1" environment-image="neutral" exposure="1" ar
                ar-modes="webxr scene-viewer quick-look">
                <div class="progress-bar" id="progress-bar" slot="progress-bar" style="display: none;">
                    <div class="update-bar" id="update-bar"></div>
                </div>
            </model-viewer>
        </main>

        <!-- Right Sidebar Controls -->
        <aside class="controls-sidebar">
            <!-- File Upload -->
            <div class="control-section">
                <h4>Upload Model</h4>
                <label for="file-upload" class="model-btn upload-btn">
                    <span class="btn-icon">üìÅ</span>
                    <span class="btn-text">Choose File</span>
                </label>
                <input type="file" id="file-upload" accept=".glb,.gltf" style="display: none;">
            </div>

            <!-- Model Selector -->
            <div class="control-section">
                <h4>Preset Models</h4>
                <div class="model-selector">
                    <button class="model-btn active"
                        onclick="loadModel('./3D_Models/high_poly_plague_knight.glb', this)">
                        <span class="btn-icon">üõ°Ô∏è</span>
                        <span class="btn-text">Plague Knight</span>
                    </button>
                    <button class="model-btn" onclick="loadModel('./3D_Models/low_poly_deer_elk.glb', this)">
                        <span class="btn-icon">ü¶å</span>
                        <span class="btn-text">Deer Elk</span>
                    </button>
                </div>
            </div>

            <!-- Render Modes -->
            <div class="control-section">
                <h4>Render Mode</h4>
                <div class="mode-buttons">
                    <button class="mode-btn active" data-mode="pbr">
                        <span class="mode-indicator"></span>
                        PBR
                    </button>
                    <button class="mode-btn" data-mode="solid">
                        <span class="mode-indicator"></span>
                        Solid
                    </button>
                    <button class="mode-btn" data-mode="wireframe">
                        <span class="mode-indicator"></span>
                        Wireframe
                    </button>
                    <button class="mode-btn" data-mode="normals">
                        <span class="mode-indicator"></span>
                        Normals
                    </button>
                    <button class="mode-btn" data-mode="matcap">
                        <span class="mode-indicator"></span>
                        MatCap
                    </button>
                </div>
            </div>

            <!-- Lighting Controls -->
            <div class="control-section">
                <h4>Lighting</h4>
                <div class="slider-group">
                    <label>Intensity: <span id="intensity-value">1.0</span></label>
                    <input type="range" id="light-intensity" min="0" max="3" step="0.1" value="1">
                </div>
                <div class="slider-group">
                    <label>Color:</label>
                    <input type="color" id="light-color" value="#ffffff">
                </div>
                <div class="slider-group">
                    <label>Exposure: <span id="exposure-value">1.0</span></label>
                    <input type="range" id="exposure" min="0" max="2" step="0.1" value="1">
                </div>
                <div class="slider-group">
                    <label>Shadow: <span id="shadow-value">1.0</span></label>
                    <input type="range" id="shadow-intensity" min="0" max="2" step="0.1" value="1">
                </div>
            </div>

            <!-- Actions -->
            <div class="control-section">
                <h4>Actions</h4>
                <div class="action-buttons">
                    <button class="feature-btn" id="reset-btn">
                        <span class="btn-icon">üîÑ</span>
                        <span class="btn-text">Reset View</span>
                    </button>
                    <button class="feature-btn" id="ar-toggle">
                        <span class="btn-icon">üì±</span>
                        <span class="btn-text">AR Mode</span>
                    </button>
                    <button class="feature-btn" id="screenshot-btn">
                        <span class="btn-icon">üì∏</span>
                        <span class="btn-text">Screenshot</span>
                    </button>
                </div>
            </div>
        </aside>
    </div>
    <script src="script.js"></script>
</body>

</html>